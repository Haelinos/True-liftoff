using GXPEngine.GXPEngine;
using GXPEngine.Managers;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace GXPEngine
{
    public class Note : AnimationSprite
    {
        float speed = 2.5f;
        MusicDisk musicDisk = new MusicDisk();

        //---------------------------------------------------------------------------------------------------------------------------
        //                                                      Note()
        //---------------------------------------------------------------------------------------------------------------------------
        public Note() : base("Notes.png", 6, 1)
        {
            SetOrigin(width / 2, height / 2);
            scale = 5;
            SetCycle(0, 1);
            RandomizeNote();
        }

        //---------------------------------------------------------------------------------------------------------------------------
        //                                                      RandomizeNote()
        //---------------------------------------------------------------------------------------------------------------------------
        public void RandomizeNote() 
        {
            var posX = new List<int> { 600, 650, 700 };
            int index = Utils.Random(0, posX.Count);
            x = (posX[index]);
        }

        //---------------------------------------------------------------------------------------------------------------------------
        //                                                      Update()
        //---------------------------------------------------------------------------------------------------------------------------
        public void Update()
        {
            MoveNoteDown();
        }

        //---------------------------------------------------------------------------------------------------------------------------
        //                                                      MoveNoteDown()
        //---------------------------------------------------------------------------------------------------------------------------
        private void MoveNoteDown()
        {
            y += speed;
        }

        //---------------------------------------------------------------------------------------------------------------------------
        //                                                      CollisionChecker()
        //---------------------------------------------------------------------------------------------------------------------------
        void OnCollision(GameObject other)
        {
            if (other is MusicDisk)
            {
                Console.WriteLine("is colliding with disk");
                LateDestroy();
                EventSystem.instance.onClick += MoveNoteDown;
            }
        }

        //---------------------------------------------------------------------------------------------------------------------------
        //                                                      Timer()
        //---------------------------------------------------------------------------------------------------------------------------

        //void Timer() 
        //{ 
        //    Time time 
        
        //}
    }
}
